{"version":3,"sources":["../../client.js"],"names":["TextScramble","el","scrambleSpeed","chars","update","bind","newText","window","countdowner","updateField","oldText","innerText","length","Math","max","queue","i","from","to","start","floor","random","end","push","cancelAnimationFrame","frameRequest","frame","output","complete","n","char","randomChar","innerHTML","requestAnimationFrame","padWithDots","str","maxPadding","numToAdd","dots","Countdown","that","a","Date","valueOf","b","$el","$","c","_setText","setInterval","text","initScramblers","ntsScrambler","document","getElementById","countdownScrambler","$paddingElements","paddingScramblers","each","scramblerFrequency","phrases","selectedIndex","scrambleText","setText","ready","ibeam","flashIbeam"],"mappings":";;;;;;IAAMA,Y;AACF,0BAAYC,EAAZ,EAAgBC,aAAhB,EAA+BC,KAA/B,EAAsC;AAAA;;AAClC,aAAKF,EAAL,GAAUA,EAAV;AACA;AACA;AACA,aAAKC,aAAL,GAAqBA,iBAAiB,EAAtC;AACA,aAAKC,KAAL,GAAaA,SAAS,WAAtB;AACA,aAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAd;AACH;;;;gCAEOC,O,EAAS;AACbC,mBAAOC,WAAP,CAAmBC,WAAnB,GAAiC,KAAjC;AACA,gBAAMC,UAAU,KAAKT,EAAL,CAAQU,SAAxB;AACA,gBAAMC,SAASC,KAAKC,GAAL,CAASJ,QAAQE,MAAjB,EAAyBN,QAAQM,MAAjC,CAAf;AACA,iBAAKG,KAAL,GAAa,EAAb;;AAEA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,MAApB,EAA4BI,GAA5B,EAAiC;AAC7B,oBAAMC,OAAOP,QAAQM,CAAR,KAAc,EAA3B;AACA,oBAAME,KAAKZ,QAAQU,CAAR,KAAc,EAAzB;;AAEA,oBAAMG,QAAQN,KAAKO,KAAL,CAAWP,KAAKQ,MAAL,KAAiB,KAAKnB,aAAjC,CAAd;AACA,oBAAMoB,MAAMH,QAAQN,KAAKO,KAAL,CAAWP,KAAKQ,MAAL,KAAiB,KAAKnB,aAAjC,CAApB;;AAEA,qBAAKa,KAAL,CAAWQ,IAAX,CAAgB,EAAEN,UAAF,EAAQC,MAAR,EAAYC,YAAZ,EAAmBG,QAAnB,EAAhB;AACH;AACDE,iCAAqB,KAAKC,YAA1B;AACA,iBAAKC,KAAL,GAAa,CAAb;AACA,iBAAKtB,MAAL;AACH;;;iCAEQ;AACL,gBAAIuB,SAAS,EAAb;AACA,gBAAIC,WAAW,CAAf;AACA,iBAAK,IAAIZ,IAAI,CAAR,EAAWa,IAAI,KAAKd,KAAL,CAAWH,MAA/B,EAAuCI,IAAIa,CAA3C,EAA8Cb,GAA9C,EAAmD;AAAA,+BACV,KAAKD,KAAL,CAAWC,CAAX,CADU;AAAA,oBACzCC,IADyC,YACzCA,IADyC;AAAA,oBACnCC,EADmC,YACnCA,EADmC;AAAA,oBAC/BC,KAD+B,YAC/BA,KAD+B;AAAA,oBACxBG,GADwB,YACxBA,GADwB;AAAA,oBACnBQ,IADmB,YACnBA,IADmB;;AAE/C,oBAAI,KAAKJ,KAAL,IAAcJ,GAAlB,EAAuB;AACnBM;AACAD,8BAAUT,EAAV;AACH,iBAHD,MAGO,IAAI,KAAKQ,KAAL,IAAcP,KAAlB,EAAyB;AAC5B,wBAAI,CAACW,IAAD,IAASjB,KAAKQ,MAAL,KAAgB,IAA7B,EAAmC;AAC/BS,+BAAO,KAAKC,UAAL,EAAP;AACA,6BAAKhB,KAAL,CAAWC,CAAX,EAAcc,IAAd,GAAqBA,IAArB;AACH;AACDH,qDAA+BG,IAA/B;AACH,iBANM,MAMA;AACHH,8BAAUV,IAAV;AACH;AACJ;AACD,iBAAKhB,EAAL,CAAQ+B,SAAR,GAAoBL,MAApB;AACA,gBAAIC,aAAa,KAAKb,KAAL,CAAWH,MAA5B,EAAoC;AAChCL,uBAAOC,WAAP,CAAmBC,WAAnB,GAAiC,IAAjC;AACA;AACH,aAHD,MAGO;AACH,qBAAKgB,YAAL,GAAoBQ,sBAAsB,KAAK7B,MAA3B,CAApB;AACA,qBAAKsB,KAAL;AACH;AACJ;;;qCAEY;AACT,mBAAO,KAAKvB,KAAL,CAAWU,KAAKO,KAAL,CAAWP,KAAKQ,MAAL,KAAgB,KAAKlB,KAAL,CAAWS,MAAtC,CAAX,CAAP;AACH;;;;;;AAGL,SAASsB,WAAT,CAAqBC,GAArB,EAA0B;AACtB;AACA;AACA;;AAEA,QAAIC,aAAa,EAAjB;AACA,QAAIC,WAAWD,aAAaD,IAAIvB,MAAhC;;AAEA,QAAI0B,OAAO,EAAX;AACA,SAAK,IAAItB,IAAE,CAAX,EAAcA,IAAIqB,QAAlB,EAA4BrB,GAA5B,EAAiC;AAC7BsB,eAAOA,OAAO,GAAd;AACH;;AAED,WAAOH,MAAMG,IAAb;AACH;;IAEKC,S;AACF,yBAAc;AAAA;;AACV,YAAIC,OAAO,IAAX;AACA,YAAIC,IAAI,IAAIC,IAAJ,GAAWC,OAAX,EAAR;AACA,YAAIC,IAAI,aAAR;;AAEA,aAAKC,GAAL,GAAWC,EAAE,YAAF,CAAX;AACA,aAAKrC,WAAL,GAAmB,IAAnB;AACA,aAAKsC,CAAL,GAASH,IAAIH,CAAb;;AAEA,aAAKO,QAAL;AACAC,oBAAY,YAAW;AACnBT,iBAAKO,CAAL;AACAP,iBAAKQ,QAAL;AACH,SAHD,EAGG,GAHH;AAIH;;;;mCAEU;AACP,gBAAI,KAAKvC,WAAT,EAAsB;AAClB,qBAAKoC,GAAL,CAASK,IAAT,CAAehB,YAAY,KAAKa,CAAL,GAAS,EAArB,CAAf;AACH;AACJ;;;;;;AAGL,SAASI,cAAT,GAA0B;AACtB5C,WAAOC,WAAP,GAAqB,IAAI+B,SAAJ,EAArB;;AAEA;AACA,QAAMa,eAAe,IAAIpD,YAAJ,CAAiBqD,SAASC,cAAT,CAAwB,WAAxB,CAAjB,EAAuD,EAAvD,EAA2D,OAA3D,CAArB;AACA,QAAMC,qBAAqB,IAAIvD,YAAJ,CAAiBqD,SAASC,cAAT,CAAwB,WAAxB,CAAjB,EAAuD,EAAvD,EAA2D,OAA3D,CAA3B;;AAEAR,MAAE,YAAF,EAAgBI,IAAhB,CAAqBhB,YAAY,KAAZ,CAArB;;AAEA,QAAIsB,mBAAmBV,EAAE,kBAAF,CAAvB;AACA,QAAIW,oBAAoB,EAAxB;AACAD,qBAAiBE,IAAjB,CAAuB,UAAS1C,CAAT,EAAY;AAC/B,YAAI6B,MAAMC,EAAEU,iBAAiBxC,CAAjB,CAAF,CAAV;AACA6B,YAAIjC,MAAJ,IAAciC,IAAIK,IAAJ,CAAUhB,YAAY,EAAZ,CAAV,CAAd;;AAEAuB,0BAAkBlC,IAAlB,CAAwB,IAAIvB,YAAJ,CAAiBwD,iBAAiBxC,CAAjB,CAAjB,EAAsC,EAAtC,EAA0C,MAA1C,CAAxB;AACH,KALD;;AAOA,QAAI2C,qBAAqB,IAAzB;AACA,QAAIC,UAAU,CACV,YADU,EAEV,UAFU,CAAd;;AAKA,QAAIC,gBAAgB,CAApB;AACA,QAAIC,eAAe,SAAfA,YAAe,GAAW;AAC1BD,0BAAkB,CAAlB,GACMA,eADN,GAEMA,eAFN;AAGA;;AAEAT,qBAAaW,OAAb,CAAsB7B,YAAY,KAAZ,CAAtB;;AAEA,aAAI,IAAIlB,IAAG,CAAX,EAAcA,IAAIyC,kBAAkB7C,MAApC,EAA4CI,GAA5C,EAAiD;AAC7CyC,8BAAkBzC,CAAlB,EAAqB+C,OAArB,CAA6B7B,YAAY,EAAZ,CAA7B;AACH;;AAEDqB,2BAAmBQ,OAAnB,CAA4B7B,YAAY3B,OAAOC,WAAP,CAAmBuC,CAAnB,GAAuB,EAAnC,CAA5B;AACH,KAbD;AAcAe;AACAb,gBAAaa,YAAb,EAA2BH,kBAA3B;AACH;;AAEDb,EAAEO,QAAF,EAAYW,KAAZ,CAAmB,YAAY;AAC3Bb;;AAEA,QAAIc,QAAQnB,EAAE,gBAAF,CAAZ;AACA,QAAIoB,aAAa,SAAbA,UAAa,GAAW;AACxBD,cAAMf,IAAN,GAAatC,MAAb,GACMqD,MAAMf,IAAN,CAAW,EAAX,CADN,GAEMe,MAAMf,IAAN,CAAW,GAAX,CAFN;AAGH,KAJD;AAKAgB;AACAjB,gBAAaiB,UAAb,EAAyB,GAAzB;AACH,CAXD","file":"prod.js","sourcesContent":["class TextScramble {\n    constructor(el, scrambleSpeed, chars) {\n        this.el = el;\n        // this.chars = '!<>-_\\\\/[]{}—=+*^?#________';\n        // this.chars = '!<>-_\\\\/[]{}—=+*^?#___20173';\n        this.scrambleSpeed = scrambleSpeed || 25;\n        this.chars = chars || 'aphextwin';\n        this.update = this.update.bind(this)\n    }\n\n    setText(newText) {\n        window.countdowner.updateField = false;\n        const oldText = this.el.innerText;\n        const length = Math.max(oldText.length, newText.length);\n        this.queue = [];\n\n        for (let i = 0; i < length; i++) {\n            const from = oldText[i] || '';\n            const to = newText[i] || '';\n\n            const start = Math.floor(Math.random() * (this.scrambleSpeed));\n            const end = start + Math.floor(Math.random() * (this.scrambleSpeed));\n\n            this.queue.push({ from, to, start, end })\n        }\n        cancelAnimationFrame(this.frameRequest);\n        this.frame = 0;\n        this.update();\n    }\n\n    update() {\n        let output = '';\n        let complete = 0;\n        for (let i = 0, n = this.queue.length; i < n; i++) {\n            let { from, to, start, end, char } = this.queue[i];\n            if (this.frame >= end) {\n                complete++;\n                output += to\n            } else if (this.frame >= start) {\n                if (!char || Math.random() < 0.28) {\n                    char = this.randomChar();\n                    this.queue[i].char = char\n                }\n                output += `<span class=\"dud\">${char}</span>`\n            } else {\n                output += from\n            }\n        }\n        this.el.innerHTML = output;\n        if (complete === this.queue.length) {\n            window.countdowner.updateField = true;\n            return;\n        } else {\n            this.frameRequest = requestAnimationFrame(this.update);\n            this.frame++\n        }\n    }\n\n    randomChar() {\n        return this.chars[Math.floor(Math.random() * this.chars.length)]\n    }\n}\n\nfunction padWithDots(str) {\n    // let maxPaddingString = phrases.reduce( function(a, b) {\n    //     return a.length > b.length ? a : b;\n    // });\n\n    let maxPadding = 50;\n    let numToAdd = maxPadding - str.length;\n\n    let dots = '';\n    for (let i=0; i < numToAdd; i++) {\n        dots = dots + \".\";\n    }\n\n    return str + dots;\n}\n\nclass Countdown {\n    constructor() {\n        let that = this;\n        let a = new Date().valueOf();\n        let b = 1499119200000;\n\n        this.$el = $('#countdown');\n        this.updateField = true;\n        this.c = b - a;\n\n        this._setText();\n        setInterval(function() {\n            that.c--;\n            that._setText();\n        }, 100);\n    }\n\n    _setText() {\n        if (this.updateField) {\n            this.$el.text( padWithDots(this.c + \"\") );\n        }\n    }\n}\n\nfunction initScramblers() {\n    window.countdowner = new Countdown();\n\n    // const labelScrambler = new TextScramble(document.getElementById('aphex-label'));\n    const ntsScrambler = new TextScramble(document.getElementById('nts-label'), 35, 'aphex');\n    const countdownScrambler = new TextScramble(document.getElementById('countdown'), 15, 'aphex');\n\n    $('#nts-label').text(padWithDots(\"NTS\"));\n\n    let $paddingElements = $('.aphexDotPadding');\n    let paddingScramblers = [];\n    $paddingElements.each( function(i) {\n        let $el = $($paddingElements[i]);\n        $el.length && $el.text( padWithDots(\"\"));\n\n        paddingScramblers.push( new TextScramble($paddingElements[i], 25, 'twin'));\n    });\n\n    let scramblerFrequency = 2000;\n    let phrases = [\n        \"APHEX TWIN\",\n        \"INCOMING\",\n    ];\n\n    let selectedIndex = 0;\n    let scrambleText = function() {\n        selectedIndex === 0\n            ? selectedIndex++\n            : selectedIndex--;\n        // labelScrambler.setText( padWithDots(phrases[selectedIndex]));\n\n        ntsScrambler.setText( padWithDots(\"NTS\"));\n\n        for(let i =0; i < paddingScramblers.length; i++) {\n            paddingScramblers[i].setText(padWithDots(\"\"));\n        }\n\n        countdownScrambler.setText( padWithDots(window.countdowner.c + \"\") );\n    };\n    scrambleText();\n    setInterval( scrambleText, scramblerFrequency);\n}\n\n$(document).ready( function () {\n    initScramblers();\n\n    let ibeam = $('#flashing-beam');\n    let flashIbeam = function() {\n        ibeam.text().length\n            ? ibeam.text('')\n            : ibeam.text('|');\n    };\n    flashIbeam();\n    setInterval( flashIbeam, 500);\n});"]}