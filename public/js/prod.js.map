{"version":3,"sources":["../../client.js"],"names":["TextScramble","el","Countdown","chars","update","bind","newText","oldText","innerText","length","Math","max","queue","i","from","to","start","floor","random","end","push","cancelAnimationFrame","frameRequest","frame","output","complete","n","char","randomChar","innerHTML","requestAnimationFrame","padWithDots","str","maxPadding","numToAdd","dots","that","a","Date","valueOf","b","$el","$","updateField","c","setInterval","text","initScramblers","window","countdowner","ntsScrambler","document","getElementById","$paddingElements","paddingScramblers","each","scramblerFrequency","phrases","selectedIndex","scrambleText","setText","aphexCountdown","$countdown","ready","ibeam","flashIbeam"],"mappings":"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","file":"prod.js","sourcesContent":["class TextScramble {\n    constructor(el, Countdown) {\n        this.el = el;\n        // this.chars = '!<>-_\\\\/[]{}—=+*^?#________';\n        // this.chars = '!<>-_\\\\/[]{}—=+*^?#___20173';\n        this.chars = 'aphextwin';\n        this.update = this.update.bind(this)\n    }\n\n    setText(newText) {\n        const oldText = this.el.innerText;\n        const length = Math.max(oldText.length, newText.length);\n        this.queue = [];\n\n        for (let i = 0; i < length; i++) {\n            const from = oldText[i] || '';\n            const to = newText[i] || '';\n\n            const start = Math.floor(Math.random() * 40);\n            const end = start + Math.floor(Math.random() * 40);\n\n            this.queue.push({ from, to, start, end })\n        }\n        cancelAnimationFrame(this.frameRequest);\n        this.frame = 0;\n        this.update();\n    }\n\n    update() {\n        let output = '';\n        let complete = 0;\n        for (let i = 0, n = this.queue.length; i < n; i++) {\n            let { from, to, start, end, char } = this.queue[i];\n            if (this.frame >= end) {\n                complete++;\n                output += to\n            } else if (this.frame >= start) {\n                if (!char || Math.random() < 0.28) {\n                    char = this.randomChar();\n                    this.queue[i].char = char\n                }\n                output += `<span class=\"dud\">${char}</span>`\n            } else {\n                output += from\n            }\n        }\n        this.el.innerHTML = output;\n        if (complete === this.queue.length) {\n            return;\n        } else {\n            this.frameRequest = requestAnimationFrame(this.update);\n            this.frame++\n        }\n    }\n\n    randomChar() {\n        return this.chars[Math.floor(Math.random() * this.chars.length)]\n    }\n}\n\nfunction padWithDots(str) {\n    // let maxPaddingString = phrases.reduce( function(a, b) {\n    //     return a.length > b.length ? a : b;\n    // });\n\n    let maxPadding = 50;\n    let numToAdd = maxPadding - str.length;\n\n    let dots = '';\n    for (let i=0; i < numToAdd; i++) {\n        dots = dots + \".\";\n    }\n\n    return str + dots;\n}\n\nclass Countdown {\n    constructor() {\n        let that = this;\n        let a = new Date().valueOf();\n        let b = 1499119200000;\n\n        this.$el = $('#countdown');\n        this.updateField = true;\n        this.c = b - a;\n\n        setInterval(function() {\n            that.c--;\n\n            if (this.updateField) {\n                this.$el.text(padWithDots(that.c));\n            }\n        }, 100);\n    }\n}\n\nfunction initScramblers() {\n    // const labelScrambler = new TextScramble(document.getElementById('aphex-label'));\n    window.countdowner = new Countdown();\n\n    const ntsScrambler = new TextScramble(document.getElementById('nts-label'));\n    // const countdownScrambler = new TextScramble(document.getElementById('countdown'));\n\n    $('#nts-label').text(padWithDots(\"NTS\"));\n\n    let $paddingElements = $('.aphexDotPadding');\n    let paddingScramblers = [];\n    $paddingElements.each( function(i) {\n        let $el = $($paddingElements[i]);\n        $el.length && $el.text( padWithDots(\"\"));\n\n        paddingScramblers.push( new TextScramble($paddingElements[i]));\n    });\n\n    let scramblerFrequency = 2000;\n    let phrases = [\n        \"APHEX TWIN\",\n        \"INCOMING\",\n    ];\n\n    let selectedIndex = 0;\n    let scrambleText = function() {\n        selectedIndex === 0\n            ? selectedIndex++\n            : selectedIndex--;\n        // labelScrambler.setText( padWithDots(phrases[selectedIndex]));\n\n        ntsScrambler.setText( padWithDots(\"NTS\"));\n\n        for(let i =0; i < paddingScramblers.length; i++) {\n            paddingScramblers[i].setText(padWithDots(\"\"));\n        }\n\n        // $('#countdown').text(padWithDots(window.countdowner.c + \"\"));\n        // countdownScrambler.setText( padWithDots(window.countdowner.c + \"\") );\n\n        // scramble countdown\n\n    };\n    scrambleText();\n    setInterval( scrambleText, scramblerFrequency);\n}\n\nfunction aphexCountdown() {\n    let $countdown = $('#countdown');\n\n    let a = new Date().valueOf();\n    let b = 1499119200000;\n\n    let c = b - a;\n\n    // $countdown.text(padWithDots(c + \"\"));\n    setInterval(function() {\n        // $countdown.text(padWithDots(c-- + \"\"));\n    }, 100);\n}\n\n$(document).ready( function () {\n    aphexCountdown();\n    initScramblers();\n\n    let ibeam = $('#flashing-beam');\n    let flashIbeam = function() {\n        ibeam.text().length\n            ? ibeam.text('')\n            : ibeam.text('|');\n    };\n    flashIbeam();\n    setInterval( flashIbeam, 500);\n});"]}